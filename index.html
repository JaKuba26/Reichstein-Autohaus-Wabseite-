<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Reichstein Automobile – Fahrzeugsuche</title>
  <meta name="description" content="Moderne Fahrzeugsuche – edles Design, Filter, Favoriten, Vergleich, Anfragen & Inzahlungnahme." />
  <style>
    /* =========================
       Reichstein Automobile – Single-File UI (Teil 1/2)
       Edler, moderner Look (AutoHero-inspiriert, eigenständig)
       ========================= */

    :root{
  --bg: #f6f7f9;
  --panel: #ffffff;
  --panel2: #ffffff;
  --border: rgba(15,23,42,.10);
  --text: #0f172a;
  --muted: rgba(15,23,42,.70);
  --faint: rgba(15,23,42,.55);

  /* AutoHero-Feeling: blau + dezentes gold als highlight */
  --accent: #2563eb;   /* Blau */
  --accent2:#f59e0b;   /* Warm/Gold */
  --danger:#ef4444;
  --ok:#22c55e;

  --shadow: 0 18px 50px rgba(2,6,23,.10);
  --shadow2: 0 10px 30px rgba(2,6,23,.08);
  --radius: 18px;
  --radius2: 14px;
  --maxw: 1180px;
  --font: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
}

    a{ color: inherit; text-decoration: none; }
    button, input, select, textarea { font: inherit; color: inherit; }

    /* Layout */
    .wrap{ width: min(var(--maxw), calc(100% - 32px)); margin: 0 auto; }

    .topbar{
      position: sticky; top: 0; z-index: 50;
      backdrop-filter: blur(16px);
      background: linear-gradient(180deg, rgba(9,12,18,.78), rgba(9,12,18,.42));
      border-bottom: 1px solid var(--border);
    }
    
    .brand{
      display:flex; align-items:center; gap: 12px; min-width: 240px;
    }
    .logo{
      width: 44px; height: 44px; border-radius: 14px;
      display:grid; place-items:center;
      background: linear-gradient(145deg, rgba(255,255,255,.10), rgba(255,255,255,.04));
      border: 1px solid var(--border);
      box-shadow: var(--shadow2);
      overflow:hidden;
    }
    .logo img{
      width: 100%; height: 100%; object-fit: cover;
      filter: saturate(1.1) contrast(1.05);
    }
    .brand-title{
  display:flex;
  flex-direction:column;
  line-height:1.1;
}

/* Untertitel im Header ausblenden */
.brand-title span{
  display:none;
}

    .brand-title strong{ font-size: 14px; letter-spacing: .25px; }
    .brand-title span{ font-size: 12px; color: var(--muted); }

    .nav{
  display:none;
}

    .pill{
      display:inline-flex; align-items:center; gap: 8px;
      padding: 10px 12px;
      border: 1px solid var(--border);
      border-radius: 999px;
      background: rgba(255,255,255,.04);
      color: var(--muted);
      transition: .18s ease;
      cursor:pointer;
      user-select:none;
    }
    .pill:hover{ background: rgba(255,255,255,.065); color: var(--text); transform: translateY(-1px); }
    .pill.primary{
      background: linear-gradient(145deg, rgba(199,162,75,.22), rgba(199,162,75,.10));
      border-color: rgba(199,162,75,.32);
      color: rgba(255,255,255,.92);
    }
    .pill.primary:hover{ background: linear-gradient(145deg, rgba(199,162,75,.30), rgba(199,162,75,.12)); }
    .pill .dot{
      width: 8px; height: 8px; border-radius: 999px; background: var(--accent);
      box-shadow: 0 0 0 4px rgba(199,162,75,.14);
    }

    /* Hero */
    .hero{
      padding: 26px 0 18px;
    }
    .hero-grid{
      display:grid;
      grid-template-columns: 1.1fr .9fr;
      gap: 18px;
      align-items: stretch;
    }
    .hero-card{
      border: 1px solid var(--border);
      border-radius: var(--radius);
      background: linear-gradient(145deg, rgba(255,255,255,.07), rgba(255,255,255,.03));
      box-shadow: var(--shadow);
      overflow:hidden;
      position:relative;
    }
    .hero-card::before{
      content:"";
      position:absolute; inset:-2px;
      background:
        radial-gradient(700px 260px at 20% 10%, rgba(199,162,75,.22), transparent 60%),
        radial-gradient(700px 260px at 90% 10%, rgba(125,211,252,.14), transparent 60%);
      opacity:.9;
      pointer-events:none;
    }
    .hero-inner{ position:relative; padding: 22px; }
    .kicker{
      display:inline-flex; gap: 8px; align-items:center;
      font-size: 12px; color: var(--muted);
      border: 1px solid rgba(199,162,75,.24);
      background: rgba(199,162,75,.10);
      padding: 6px 10px; border-radius: 999px;
      width: fit-content;
    }
    .kicker .spark{
      width:10px; height:10px; border-radius:999px;
      background: var(--accent);
      box-shadow: 0 0 0 5px rgba(199,162,75,.12);
    }
    h1{
      margin: 12px 0 8px;
      font-size: clamp(24px, 3.2vw, 38px);
      letter-spacing: -0.02em;
    }
    .hero p{
      margin:0;
      color: var(--muted);
      max-width: 62ch;
      font-size: 14px;
      line-height: 1.55;
    }
    .hero-actions{
      margin-top: 16px;
      display:flex; gap: 10px; flex-wrap:wrap;
    }

    /* Right info card */
    .info{
      display:flex; flex-direction:column; gap: 12px;
    }
    .info .mini{
      border: 1px solid var(--border);
      border-radius: var(--radius);
      background: linear-gradient(145deg, rgba(255,255,255,.06), rgba(255,255,255,.03));
      box-shadow: var(--shadow2);
      padding: 16px;
    }
    .mini h3{ margin:0 0 10px; font-size: 14px; color: rgba(255,255,255,.88); }
    .mini .row{ display:flex; justify-content:space-between; gap: 12px; padding: 9px 0; border-top: 1px solid rgba(255,255,255,.07); }
    .mini .row:first-of-type{ border-top: 0; }
    .mini .row span{ color: var(--muted); font-size: 13px; }
    .mini .row b{ font-weight: 600; font-size: 13px; color: rgba(255,255,255,.88); }
    .badge{
      display:inline-flex; gap: 8px; align-items:center;
      padding: 8px 10px;
      border-radius: 999px;
      border: 1px solid rgba(125,211,252,.25);
      background: rgba(125,211,252,.08);
      color: rgba(255,255,255,.86);
      font-size: 12px;
      width: fit-content;
    }

    /* Search panel */
    .panel{
      border: 1px solid var(--border);
      border-radius: var(--radius);
      background: var(--bg);
      box-shadow: var(--shadow2);
      overflow:hidden;
      margin: 12px 0 18px;
    }
    .panel-head{
      padding: 14px 16px;
      border-bottom: 1px solid rgba(255,255,255,.08);
      display:flex; align-items:center; justify-content:space-between; gap: 10px;
    }
    .panel-head h2{
      margin:0;
      font-size: 14px;
      letter-spacing: .2px;
      color: rgba(255,255,255,.88);
      display:flex; align-items:center; gap: 10px;
    }
    .panel-head small{ color: var(--muted); font-weight: 500; }
    .panel-body{ padding: 14px 16px 16px; }

    .filters{
      display:grid;
      grid-template-columns: repeat(12, 1fr);
      gap: 10px;
    }
    .field{
      grid-column: span 3;
      display:flex; flex-direction:column; gap: 6px;
    }
    .field.span-6{ grid-column: span 6; }
    .field.span-4{ grid-column: span 4; }
    .field.span-3{ grid-column: span 3; }
    .field.span-2{ grid-column: span 2; }
    .field.span-12{ grid-column: span 12; }

    label{
      font-size: 12px; color: var(--muted);
      display:flex; align-items:center; justify-content:space-between;
      gap: 10px;
    }

    .control{
      width: 100%;
      padding: 11px 12px;
      border-radius: 12px;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(0,0,0,.22);
      outline: none;
      transition: .18s ease;
    }
    .control:focus{
      border-color: rgba(199,162,75,.45);
      box-shadow: 0 0 0 4px rgba(199,162,75,.14);
    }

    .range{
      display:flex; gap: 10px;
    }

    .actions{
      margin-top: 12px;
      display:flex; justify-content:space-between; align-items:center; gap: 12px;
      flex-wrap: wrap;
    }
    .actions-left{ display:flex; gap: 10px; flex-wrap: wrap; }
    .btn{
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.05);
      color: rgba(255,255,255,.90);
      padding: 10px 12px;
      border-radius: 999px;
      cursor:pointer;
      transition: .18s ease;
      display:inline-flex; align-items:center; gap: 8px;
      user-select:none;
    }
    .btn:hover{ background: rgba(255,255,255,.08); transform: translateY(-1px); }
    .btn.primary{
      background: linear-gradient(145deg, rgba(199,162,75,.26), rgba(199,162,75,.12));
      border-color: rgba(199,162,75,.32);
    }
    .btn.primary:hover{
      background: linear-gradient(145deg, rgba(199,162,75,.34), rgba(199,162,75,.14));
    }
    .btn.ghost{
      background: transparent;
      border-color: rgba(255,255,255,.12);
      color: var(--muted);
    }
    .btn.danger{
      border-color: rgba(251,113,133,.35);
      background: rgba(251,113,133,.10);
    }
    .btn:active{ transform: translateY(0); }

    .kpis{
      display:flex; gap: 10px; flex-wrap:wrap; align-items:center;
      color: var(--muted);
      font-size: 12px;
    }
    .chip{
      display:inline-flex; align-items:center; gap: 8px;
      padding: 8px 10px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.04);
    }
    .chip b{ color: rgba(255,255,255,.88); font-weight: 650; }

    /* Results grid */
    .grid{
      display:grid;
      grid-template-columns: repeat(12, 1fr);
      gap: 12px;
      margin-bottom: 18px;
    }
    .card{
      grid-column: span 4;
      border: 1px solid rgba(255,255,255,.10);
      border-radius: var(--radius);
      background: linear-gradient(145deg, rgba(255,255,255,.06), rgba(255,255,255,.03));
      box-shadow: var(--shadow2);
      overflow:hidden;
      position:relative;
      transition: .18s ease;
    }
    .card:hover{ transform: translateY(-3px); border-color: rgba(255,255,255,.16); }
    .thumb{
      aspect-ratio: 16 / 9;
height: auto;
      background: rgba(255,255,255,.04);
      position:relative;
      overflow:hidden;
    }
    .thumb img{
      width: 100%;
      height: 100%;
      object-fit: cover;
      transform: scale(1.02);
      filter: saturate(1.06) contrast(1.05);
    }
    .thumb::after{
      content:"";
      position:absolute; inset:0;
      background: linear-gradient(180deg, rgba(0,0,0,.05), rgba(0,0,0,.55));
      pointer-events:none;
    }
    .tagbar{
      position:absolute; left: 10px; right: 10px; bottom: 10px;
      display:flex; justify-content:space-between; gap: 8px;
      align-items:flex-end;
    }
    .tag{
      display:inline-flex; align-items:center; gap: 8px;
      padding: 7px 10px;
      border-radius: 999px;
      background: rgba(0,0,0,.45);
      border: 1px solid rgba(255,255,255,.14);
      color: rgba(255,255,255,.92);
      font-size: 12px;
      backdrop-filter: blur(8px);
    }
    .tag .dot{
      width:8px; height:8px; border-radius:999px; background: var(--accent2);
      box-shadow: 0 0 0 4px rgba(125,211,252,.14);
    }
    .tag.price{
      background: rgba(199,162,75,.18);
      border-color: rgba(199,162,75,.30);
    }

    .card-body{ padding: 14px 14px 12px; }
    .title{
      display:flex; justify-content:space-between; align-items:flex-start; gap: 10px;
      margin-bottom: 8px;
    }
    .title h3{
      margin:0;
      font-size: 14px;
      line-height: 1.3;
      letter-spacing: .1px;
    }
    .title .sub{
      margin-top: 4px;
      font-size: 12px;
      color: var(--muted);
    }
    .iconbtn{
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.05);
      border-radius: 999px;
      width: 36px; height: 36px;
      display:grid; place-items:center;
      cursor:pointer;
      transition: .18s ease;
      flex: 0 0 auto;
    }
    .iconbtn:hover{ background: rgba(255,255,255,.08); transform: translateY(-1px); }
    .iconbtn.active{
      border-color: rgba(199,162,75,.40);
      background: rgba(199,162,75,.16);
    }
    .specs{
      display:grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 8px;
      padding-top: 10px;
      border-top: 1px solid rgba(255,255,255,.08);
    }
    .spec{
      display:flex; flex-direction:column; gap: 2px;
      padding: 8px 9px;
      border-radius: 12px;
      background: rgba(255,255,255,.035);
      border: 1px solid rgba(255,255,255,.08);
    }
    .spec span{ font-size: 11px; color: var(--muted); }
    .spec b{ font-size: 12px; color: rgba(255,255,255,.88); font-weight: 650; }

    .card-foot{
      padding: 12px 14px 14px;
      display:flex; gap: 8px; flex-wrap:wrap;
    }

    /* Pagination */
    .pager{
      display:flex; justify-content:space-between; align-items:center; gap: 12px;
      border: 1px solid rgba(255,255,255,.10);
      border-radius: var(--radius);
      background: rgba(255,255,255,.03);
      padding: 12px 14px;
      margin-bottom: 26px;
    }

    /* Modals / Drawer */
    .overlay{
      position:fixed; inset:0; z-index: 100;
      background: rgba(0,0,0,.62);
      backdrop-filter: blur(8px);
      display:none;
      padding: 18px;
    }
    .overlay.show{ display:block; }
    .modal{
      width: min(980px, 100%);
      margin: 0 auto;
      border-radius: 22px;
      border: 1px solid rgba(255,255,255,.12);
      background: linear-gradient(145deg, rgba(12,16,22,.95), rgba(9,12,18,.92));
      box-shadow: var(--shadow);
      overflow:hidden;
      max-height: calc(100vh - 36px);
      display:flex;
      flex-direction:column;
    }
    .modal-head{
      display:flex; justify-content:space-between; align-items:center; gap: 12px;
      padding: 14px 16px;
      border-bottom: 1px solid rgba(255,255,255,.08);
    }
    .modal-head h3{ margin:0; font-size: 14px; color: rgba(255,255,255,.90); }
    .modal-body{
      padding: 14px 16px 16px;
      overflow:auto;
    }

    .two-col{
      display:grid;
      grid-template-columns: 1.1fr .9fr;
      gap: 14px;
    }
    .gallery{
      border-radius: 18px;
      border: 1px solid rgba(255,255,255,.10);
      overflow:hidden;
      background: rgba(255,255,255,.03);
    }
    .gallery-main{ aspect-ratio: 16 / 9;
height: auto;
 background: rgba(255,255,255,.04); position:relative; }
    .gallery-main img{ width:100%; height:100%; object-fit:cover; }
    .gallery-strip{
      display:flex; gap: 8px;
      padding: 10px;
      overflow:auto;
      border-top: 1px solid rgba(255,255,255,.08);
    }
    .thumb2{
      width: 92px; height: 62px; flex: 0 0 auto;
      border-radius: 12px; overflow:hidden;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.03);
      cursor:pointer;
      opacity:.85;
      transition: .18s ease;
    }
    .thumb2:hover{ opacity:1; transform: translateY(-1px); }
    .thumb2.active{ border-color: rgba(199,162,75,.45); opacity:1; }
    .thumb2 img{ width:100%; height:100%; object-fit:cover; }

    .sidebox{
      border-radius: 18px;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.03);
      padding: 14px;
      display:flex;
      flex-direction:column;
      gap: 10px;
      position: sticky;
      top: 10px;
      height: fit-content;
    }
    .pricebig{
      font-size: 22px;
      font-weight: 780;
      letter-spacing: -.01em;
    }
    .muted{ color: var(--muted); }
    .list{
      display:grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 8px;
    }
    .li{
      padding: 9px 10px;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.035);
      display:flex; justify-content:space-between; gap: 10px;
      font-size: 12px;
      color: rgba(255,255,255,.86);
    }
    .li span{ color: var(--muted); }

    /* Sections */
    .section-title{
      display:flex; align-items:center; justify-content:space-between; gap: 12px;
      margin: 10px 0 10px;
    }
    .section-title h2{ margin:0; font-size: 14px; color: rgba(255,255,255,.88); }
    .divider{ height:1px; background: rgba(255,255,255,.08); margin: 12px 0; }

    /* Footer */
    footer{
      border-top: 1px solid rgba(255,255,255,.10);
      background: rgba(0,0,0,.20);
      padding: 22px 0;
      color: var(--muted);
      font-size: 12px;
    }
    .foot-grid{
      display:grid;
      grid-template-columns: 1.2fr 1fr 1fr;
      gap: 14px;
      align-items:start;
    }
    .foot-grid h4{ margin:0 0 10px; color: rgba(255,255,255,.86); font-size: 12px; }
    .foot-grid a{ color: var(--muted); display:block; padding: 4px 0; }
    .foot-grid a:hover{ color: rgba(255,255,255,.88); }

    /* Responsive */
    @media (max-width: 980px){
      .hero-grid{ grid-template-columns: 1fr; }
      .card{ grid-column: span 6; }
      .two-col{ grid-template-columns: 1fr; }
      .sidebox{ position: static; }
      .field{ grid-column: span 6; }
      .field.span-2{ grid-column: span 6; }
      .field.span-3{ grid-column: span 6; }
      .field.span-4{ grid-column: span 6; }
      .field.span-6{ grid-column: span 12; }
      .foot-grid{ grid-template-columns: 1fr; }
    }
    @media (max-width: 620px){

  html, body{
    max-width: 100%;
    overflow-x: hidden;
  }

  .hero-grid{ grid-template-columns: 1fr; }

  .grid,
  .filters,
  .foot-grid{
    grid-template-columns: repeat(12, 1fr);
  }

  .card,
  .mini,
  .panel,
  .ah-card{
    grid-column: span 12;
  }

  .field,
  .field.span-2,
  .field.span-3,
  .field.span-4,
  .field.span-6{
    grid-column: span 12;
  }

  .specs{ grid-template-columns: repeat(2, 1fr); }

  .range{ flex-direction: column; }

  .pager{ flex-direction: column; align-items: stretch; }

  .nav{ justify-content: flex-start; }

  .sidebox{ position: static; top: auto; }

  .ah-brands{ grid-template-columns: repeat(2, 1fr); }

  .ah-tiles{ grid-template-columns: 1fr; }

  .bodybar-inner{ justify-content: flex-start; }

}

    /* Utility */
    .hide{ display:none !important; }
    .sr-only{
      position:absolute; width:1px; height:1px; padding:0; margin:-1px;
      overflow:hidden; clip:rect(0,0,0,0); white-space:nowrap; border:0;
    }
    .toast{
      position: fixed; right: 16px; bottom: 16px; z-index: 200;
      display:flex; flex-direction:column; gap: 10px;
      pointer-events:none;
    }
    .toast .t{
      pointer-events:auto;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(12,16,22,.92);
      border-radius: 14px;
      padding: 10px 12px;
      box-shadow: var(--shadow2);
      max-width: 360px;
      font-size: 12px;
      color: rgba(255,255,255,.88);
      display:flex; align-items:flex-start; justify-content:space-between; gap: 12px;
    }
    .t small{ color: var(--muted); display:block; margin-top: 4px; }
    /* =========================
   AutoHero-like (clean blocks)
   ========================= */
.topbar{
  background: rgba(255,255,255,.85);
  border-bottom: 1px solid var(--border);
}
.pill{
  background: #fff;
  border: 1px solid var(--border);
  color: var(--muted);
}
.pill.primary{
  background: rgba(37,99,235,.10);
  border-color: rgba(37,99,235,.25);
  color: var(--text);
}
.pill .dot{ background: var(--accent); box-shadow: 0 0 0 4px rgba(37,99,235,.12); }

.hero-card, .panel, .card, .mini, .modal, .pager{
  background: #fff !important;
  border-color: var(--border) !important;
  box-shadow: var(--shadow2) !important;
}
.muted{ color: var(--muted) !important; }

.btn{
  background: #fff;
  color: var(--text);
  border: 1px solid var(--border);
}
.btn.primary{
  background: var(--accent);
  border-color: var(--accent);
  color: #fff;
}
.btn.ghost{ background: transparent; }

/* AutoHero Sections */
.ah-section{ margin: 18px auto; }
.ah-card{
  background:#fff; border:1px solid var(--border); border-radius: 22px;
  box-shadow: var(--shadow2); padding: 18px;
}
.ah-head{ display:flex; flex-direction:column; gap:6px; margin-bottom: 14px; }
.ah-head h2{ margin:0; font-size: 22px; letter-spacing: -.01em; }
.ah-sub{ color: var(--muted); font-size: 14px; }

.ah-search{
  display:flex; gap:10px; flex-wrap:wrap; align-items:center; margin-bottom: 12px;
}
.ah-input{
  width: 100%;
  padding: 12px 14px;
  border-radius: 14px;
  border: 1px solid var(--border);
  background: #fff;
  outline: none;
}
.ah-input:focus{ border-color: rgba(37,99,235,.45); box-shadow: 0 0 0 4px rgba(37,99,235,.12); }
.ah-btn{
  padding: 11px 14px;
  border-radius: 14px;
  border: 1px solid var(--border);
  background: #fff;
  cursor:pointer;
}
.ah-btn.primary{
  background: var(--accent);
  border-color: var(--accent);
  color:#fff;
}
.ah-brands{
  display:grid;
  grid-template-columns: repeat(8, 1fr);
  gap: 10px;
}
.ah-brand{
  border:1px solid var(--border);
  border-radius: 14px;
  padding: 12px;
  background: #fff;
  text-align:center;
  cursor:pointer;
  transition:.15s ease;
  color: var(--text);
  font-size: 13px;
}
.ah-brand:hover{ transform: translateY(-1px); box-shadow: var(--shadow2); }
.ah-brand b{ display:block; font-size: 12px; color: var(--muted); margin-top: 6px; }

.ah-tabs{ display:flex; gap:10px; margin: 10px 0 14px; }
.ah-tab{
  padding: 10px 14px;
  border-radius: 12px;
  border:1px solid var(--border);
  background:#fff;
  cursor:pointer;
  color: var(--muted);
}
.ah-tab.active{
  border-color: rgba(37,99,235,.35);
  background: rgba(37,99,235,.10);
  color: var(--text);
}

.ah-budget .ah-grid2{
  display:grid;
  grid-template-columns: 1.2fr 1fr 1fr .9fr;
  gap: 12px;
  align-items: end;
}
.ah-label{ display:block; font-size: 12px; color: var(--muted); margin-bottom: 6px; }
.ah-row{ display:flex; gap:10px; }
.ah-budgetbox{
  border:1px solid var(--border);
  border-radius: 18px;
  padding: 14px;
  background: #fafafa;
}
.ah-budgettitle{ color: var(--muted); font-size: 12px; }
.ah-budgetvalue{ font-size: 26px; font-weight: 800; margin: 8px 0 10px; }
.ah-link{ display:inline-block; margin-top:10px; color: var(--accent); font-size: 13px; }

.ah-tiles{
  display:grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 12px;
}
.ah-tile{
  border:1px solid var(--border);
  border-radius: 18px;
  padding: 14px;
  background: #fff;
  display:flex;
  flex-direction:column;
  gap: 8px;
}
.ah-tile b{ font-size: 14px; }
.ah-tile span{ color: var(--muted); font-size: 13px; line-height:1.45; }

@media (max-width: 980px){
  .ah-brands{ grid-template-columns: repeat(4, 1fr); }
  .ah-budget .ah-grid2{ grid-template-columns: 1fr; }
  .ah-tiles{ grid-template-columns: 1fr; }
}
/* Karosserie-Auswahl (AutoHero-Style) */
.bodybar{
  margin: 14px 0 8px;
}
.bodybar-inner{
  display:flex;
  gap:10px;
  flex-wrap:wrap;
  align-items:center;
  padding: 10px;
  border: 1px solid var(--border);
  background: #fff;
  border-radius: 18px;
  box-shadow: var(--shadow2);
}
.bodyimg{
  width: 22px;
  height: 22px;
  flex: 0 0 auto;
  display: block;
}
.bodychip{
  border: 1px solid var(--border);
  background: #fff;
  color: var(--text);
  padding: 10px 12px;
  border-radius: 999px;
  cursor:pointer;
  transition:.15s ease;
  font-size: 13px;
  display: inline-flex;
align-items: center;
gap: 8px;
}
.bodychip:hover{
  transform: translateY(-1px);
  box-shadow: var(--shadow2);
}
.bodychip.active{
  background: rgba(37,99,235,.10);
  border-color: rgba(37,99,235,.30);
}
  </style>
</head>
<body>
  <header class="topbar">
    <div class="wrap topbar-inner">
      <a class="brand" href="#/fahrzeuge" id="homeLink" aria-label="Zur Fahrzeugsuche">
        <div class="logo" title="Reichstein Automobile">
          <!-- LOGO: Lege dein Logo als public/logo.svg (oder ersetze hier die URL) -->
          <img src="logo.svg" alt="Reichstein Automobile Logo" onerror="this.style.display='none'; this.parentElement.textContent='RA'; this.parentElement.style.fontWeight='800';" />
        </div>
        <div class="brand-title">
          <strong>Reichstein Automobile</strong>
          <span>Premium Gebrauchtwagen • Modern • Transparent</span>
        </div>
      </a>

      <nav class="nav" aria-label="Hauptnavigation">
        <a class="pill" href="#/fahrzeuge" id="navCars"><span class="dot"></span>Fahrzeuge</a>
        <a class="pill" href="#/inzahlungnahme" id="navTrade">Inzahlungnahme</a>
        <a class="pill" href="#/finanzierung" id="navFinance">Finanzierung</a>
        <a class="pill" href="#/kontakt" id="navContact">Kontakt</a>
        
        <a class="pill" href="#/favoriten" id="navFav">Favoriten <span id="favCount" class="chip"><b>0</b></span></a>
        <a class="pill primary" href="#/vergleich" id="navCompare">Vergleich <span id="cmpCount" class="chip"><b>0</b></span></a>
      </nav>
    </div>
  </header>

  <main class="wrap">
   
    <section class="bodybar">
 <div class="bodybar-inner">

  <button class="bodychip" data-body="SUV">
    <img class="bodyimg" src="img/body/suv.svg" alt="">
    <span>SUV</span>
  </button>

  <button class="bodychip" data-body="Kombi">
    <img class="bodyimg" src="img/body/kombi.svg" alt="">
    <span>Kombi</span>
  </button>

  <button class="bodychip" data-body="Limousine">
    <img class="bodyimg" src="img/body/limousine.svg" alt="">
    <span>Limousine</span>
  </button>

  <button class="bodychip" data-body="Van / Kleinbus">
    <img class="bodyimg" src="img/body/van.svg" alt="">
    <span>Van / Kleinbus</span>
  </button>

  <button class="bodychip" data-body="Kompakt">
    <img class="bodyimg" src="img/body/kleinwagen.svg" alt="">
    <span>Kleinwagen</span>
  </button>

  <button class="bodychip" data-body="Cabrio">
    <img class="bodyimg" src="img/body/cabrio.svg" alt="">
    <span>Cabrio</span>
  </button>

  <button class="bodychip" data-body="Coupe">
    <img class="bodyimg" src="img/body/coupe.svg" alt="">
    <span>Coupé / Sport</span>
  </button>

  <button class="bodychip" data-body="Pickup">
    <img class="bodyimg" src="img/body/pickup.svg" alt="">
    <span>Pickup</span>
  </button>

  <button class="bodychip" data-body="Alle">
    <img class="bodyimg" src="img/body/alle.svg" alt="">
    <span>Alle</span>
  </button>

</div>
</section>
    <!-- HERO -->
    <section class="hero" id="hero">
      <div class="hero-grid">
        <div class="hero-card">
          <div class="hero-inner">
            <div class="kicker"><span class="spark"></span> Edle Fahrzeugsuche – wie ein Online-Autohaus</div>
            <h1>Finde dein nächstes Fahrzeug – schnell, modern, transparent.</h1>
            <p>
              Filter nach Preis, Marke, Kilometer, Erstzulassung, Getriebe, Kraftstoff & mehr. Speichere Favoriten,
              vergleiche bis zu 3 Fahrzeuge und sende eine Anfrage in Sekunden.
            </p>
            <div class="hero-actions">
              <button class="btn primary" id="btnScrollToResults">Jetzt Fahrzeuge ansehen</button>
              <button class="btn ghost" id="btnOpenTradeFromHero">Inzahlungnahme starten</button>
              <button class="btn" id="btnQuickContact">Schnellkontakt</button>
            </div>
          </div>
        </div>

        <div class="info">
          <div class="mini">
            <h3>Heute im Überblick</h3>
            <div class="row"><span>Fahrzeuge im Bestand</span><b id="kpiTotal">–</b></div>
            <div class="row"><span>Durchschnittspreis</span><b id="kpiAvg">–</b></div>
            <div class="row"><span>Neueste Zugänge</span><b id="kpiNew">–</b></div>
            <div class="badge">✔ Finanzierung/Anfrage in 1 Minute • ✔ Favoriten • ✔ Vergleich</div>
          </div>

          <div class="mini">
            <h3>Öffnungszeiten (Beispiel)</h3>
            <div class="row"><span>Mo–Fr</span><b>09:00–18:00</b></div>
            <div class="row"><span>Sa</span><b>10:00–14:00</b></div>
            <div class="row"><span>So</span><b>geschlossen</b></div>
            <div class="badge" style="border-color: rgba(199,162,75,.25); background: rgba(199,162,75,.08);">☎ Telefon & WhatsApp CTA in den Details</div>
          </div>
        </div>
      </div>
    </section>

    <!-- ROUTED VIEWS -->
<!-- ÜBER UNS -->
<section class="panel" style="margin-bottom:26px;">
  <div class="panel-head">
    <h2>Über uns <small>Reichstein Automobile</small></h2>
  </div>
  <div class="panel-body">
    <div class="grid">
      <div style="grid-column: span 7;">
        <p class="muted" style="font-size:14px; line-height:1.6;">
          Seit über <b>20 Jahren</b> steht <b>Reichstein Automobile</b> für
          Premium-Gebrauchtwagen in Berlin. Unser Fokus liegt auf
          hochwertigen Fahrzeugen, transparenter Beratung und einem
          sicheren Kaufgefühl.
        </p>
        <p class="muted" style="font-size:14px; line-height:1.6;">
          Unser Ziel ist es, nicht nur ein Auto zu verkaufen, sondern das
          <b>passende Fahrzeug</b> für Ihre Bedürfnisse zu finden –
          zuverlässig, ehrlich und auf Augenhöhe.
        </p>
      </div>

      <div style="grid-column: span 5;">
        <div class="list">
          <div class="li"><span>✔ Premium-Marken</span><b>BMW · Mercedes · Porsche · Audi</b></div>
          <div class="li"><span>✔ Großer Fahrzeugbestand</span><b>ständig verfügbar</b></div>
          <div class="li"><span>✔ Faire Preise</span><b>transparent & marktgerecht</b></div>
          <div class="li"><span>✔ Sicherheit</span><b>sorgfältig geprüft</b></div>
          <div class="li"><span>✔ Beratung</span><b>persönlich & ehrlich</b></div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- STARTSEITE: Quick Actions (AutoHero-like) -->
<section class="ah-section">
  <div class="ah-card">
    <div class="ah-head">
      <h2>Fahrzeug finden</h2>
      <span class="ah-sub">Suche nach Marke, Modell oder Budget – in Sekunden.</span>
    </div>

    <div class="ah-search">
      <input id="ahSearch" class="ah-input" placeholder="z.B. BMW 3er, Audi A4, AMG …" />
      <button class="ah-btn primary" id="ahSearchBtn">Suchen</button>
      <button class="ah-btn" id="ahOpenAll">Alle Fahrzeuge</button>
    </div>

    <div class="ah-brands" id="ahBrands"></div>
  </div>
</section>

<section class="ah-section">
  <div class="ah-card">
    <div class="ah-head">
      <h2>Finde Autos, die zu deinem Budget passen</h2>
      <span class="ah-sub">Schnelle Schätzung – unverbindlich.</span>
    </div>

    <div class="ah-tabs">
      <button class="ah-tab active" data-mode="month">Pro Monat</button>
      <button class="ah-tab" data-mode="total">Gesamtbetrag</button>
    </div>

    <div class="ah-budget">
      <div class="ah-grid2">
        <div>
          <label class="ah-label">Monatliche Rate (von / bis)</label>
          <div class="ah-row">
            <select class="ah-input" id="rateMin">
              <option value="">Ab</option><option>150</option><option>200</option><option>250</option><option>300</option><option>400</option><option>500</option>
            </select>
            <select class="ah-input" id="rateMax">
              <option value="">Bis</option><option>250</option><option>300</option><option>400</option><option>500</option><option>650</option><option>800</option>
            </select>
          </div>
        </div>

        <div>
          <label class="ah-label">Anzahlung</label>
          <input class="ah-input" id="downPay" placeholder="0 €" inputmode="numeric" />
        </div>

        <div>
          <label class="ah-label">Laufzeit</label>
          <select class="ah-input" id="term">
            <option value="">Monate</option>
            <option>24</option><option>36</option><option>48</option><option>60</option><option>72</option>
          </select>
        </div>

        <div class="ah-budgetbox">
          <div class="ah-budgettitle">Geschätztes Budget</div>
          <div class="ah-budgetvalue" id="budgetOut">0 €</div>
          <button class="ah-btn primary" id="budgetApply">Finde dein Auto</button>
          <a href="#/kontakt" class="ah-link">Jetzt anfragen</a>
        </div>
      </div>
    </div>
  </div>
</section>

<section class="ah-section">
  <div class="ah-card">
    <div class="ah-head">
      <h2>Vom Klick bis zur Übergabe – sorgenfrei</h2>
      <span class="ah-sub">Kurz, klar, kundenfreundlich.</span>
    </div>

    <div class="ah-tiles">
      <div class="ah-tile">
        <b>Finanzierung</b>
        <span>Unverbindliche Anfrage – schnell beantwortet.</span>
        <button class="ah-btn" onclick="location.hash='#/kontakt'">Anfragen</button>
      </div>

      <div class="ah-tile">
        <b>Inzahlungnahme</b>
        <span>Fahrzeugdaten eingeben – wir melden uns mit Angebot.</span>
        <button class="ah-btn" onclick="location.hash='#/inzahlungnahme'">Starten</button>
      </div>

      <div class="ah-tile">
        <b>Qualität</b>
        <span>Geprüfte Fahrzeuge & transparente Beratung.</span>
        <button class="ah-btn" onclick="location.hash='#/fahrzeuge'">Fahrzeuge ansehen</button>
      </div>

      <div class="ah-tile">
        <b>Kontakt</b>
        <span>030 – 74374315 • info@reichsteinautomobile.de</span>
        <button class="ah-btn primary" onclick="location.hash='#/kontakt'">Kontakt</button>
      </div>
    </div>
  </div>
</section>
    <section id="viewCars">
      <div class="panel">
        <div class="panel-head">
          <h2>Fahrzeugsuche <small>Filter • Sortierung • Favoriten • Vergleich</small></h2>
          <div class="kpis">
            <span class="chip">Treffer: <b id="hitCount">0</b></span>
            <span class="chip">Seite: <b id="pageInfo">1</b></span>
          </div>
        </div>
        <div class="panel-body">
          <form id="filterForm" class="filters" autocomplete="off">
            <div class="field span-6">
              <label for="q">Suche (Marke / Modell / Stichwort)</label>
              <input class="control" id="q" name="q" placeholder="z.B. BMW 3er, Avant, AMG, Panorama..." />
            </div>

            <div class="field span-3">
              <label for="make">Marke</label>
              <select class="control" id="make" name="make"></select>
            </div>
            <div class="field span-3">
  <label for="bodyType">Karosserie</label>
  <select class="control" id="bodyType" name="bodyType"></select>
</div>

            <div class="field span-3">
              <label for="fuel">Kraftstoff</label>
              <select class="control" id="fuel" name="fuel"></select>
            </div>

            <div class="field span-3">
              <label for="gear">Getriebe</label>
              <select class="control" id="gear" name="gear"></select>
            </div>

            <div class="field span-3">
              <label for="yearMin">Erstzulassung (von)</label>
              <select class="control" id="yearMin" name="yearMin"></select>
            </div>

            <div class="field span-3">
              <label for="yearMax">Erstzulassung (bis)</label>
              <select class="control" id="yearMax" name="yearMax"></select>
            </div>

            <div class="field span-3">
              <label>Preis (€)</label>
              <div class="range">
                <input class="control" id="priceMin" name="priceMin" placeholder="min" inputmode="numeric" />
                <input class="control" id="priceMax" name="priceMax" placeholder="max" inputmode="numeric" />
              </div>
            </div>

            <div class="field span-3">
              <label>Kilometer</label>
              <div class="range">
                <input class="control" id="kmMin" name="kmMin" placeholder="min" inputmode="numeric" />
                <input class="control" id="kmMax" name="kmMax" placeholder="max" inputmode="numeric" />
              </div>
            </div>

            <div class="field span-3">
              <label for="sort">Sortierung</label>
              <select class="control" id="sort" name="sort">
                <option value="newest">Neueste zuerst</option>
                <option value="price_asc">Preis aufsteigend</option>
                <option value="price_desc">Preis absteigend</option>
                <option value="km_asc">KM aufsteigend</option>
                <option value="km_desc">KM absteigend</option>
                <option value="year_desc">EZ neu → alt</option>
                <option value="year_asc">EZ alt → neu</option>
              </select>
            </div>

            <div class="field span-3">
              <label for="perPage">Pro Seite</label>
              <select class="control" id="perPage" name="perPage">
                <option>9</option>
                <option>12</option>
                <option>18</option>
              </select>
            </div>

            <div class="field span-12">
              <div class="actions">
                <div class="actions-left">
                  <button type="submit" class="btn primary">Filter anwenden</button>
                  <button type="button" class="btn ghost" id="btnReset">Zurücksetzen</button>
                  <button type="button" class="btn" id="btnOnlyFav">Nur Favoriten</button>
                  <button type="button" class="btn" id="btnOnlyNew">Neu (≤ 14 Tage)</button>
                </div>
                <div class="kpis">
                  <span class="chip">Favoriten: <b id="kpiFav">0</b></span>
                  <span class="chip">Vergleich: <b id="kpiCmp">0</b></span>
                </div>
              </div>
            </div>
          </form>
        </div>
      </div>

      <div class="section-title">
        <h2>Ergebnisse</h2>
        <div class="kpis">
          <span class="chip">Tipp: Klick auf ein Fahrzeug für Details</span>
        </div>
      </div>

      <div class="grid" id="resultsGrid" aria-live="polite"></div>

      <div class="pager">
        <div class="kpis">
          <span class="chip">Anzeige: <b id="showingInfo">–</b></span>
        </div>
        <div style="display:flex; gap:10px; flex-wrap:wrap;">
          <button class="btn" id="btnPrev">← Zurück</button>
          <button class="btn" id="btnNext">Weiter →</button>
        </div>
      </div>
    </section>

    <!-- Favoriten view -->
    <section id="viewFav" class="hide">
      <div class="panel">
        <div class="panel-head">
          <h2>Favoriten <small>Deine gemerkten Fahrzeuge</small></h2>
          <div class="kpis">
            <span class="chip">Gespeichert: <b id="favCount2">0</b></span>
            <button class="btn danger" id="btnClearFav">Favoriten löschen</button>
          </div>
        </div>
        <div class="panel-body">
          <div class="grid" id="favGrid"></div>
          <div class="muted" id="favEmpty">Noch keine Favoriten. Öffne die Fahrzeugsuche und klicke auf das ★.</div>
        </div>
      </div>
    </section>

    <!-- Vergleich view -->
    <section id="viewCompare" class="hide">
      <div class="panel">
        <div class="panel-head">
          <h2>Vergleich <small>Bis zu 3 Fahrzeuge nebeneinander</small></h2>
          <div class="kpis">
            <span class="chip">Ausgewählt: <b id="cmpCount2">0</b></span>
            <button class="btn ghost" id="btnClearCmp">Vergleich leeren</button>
          </div>
        </div>
        <div class="panel-body">
          <div id="cmpWrap"></div>
          <div class="muted" id="cmpEmpty">Noch kein Vergleich. In der Fahrzeugsuche „Vergleich“ hinzufügen.</div>
        </div>
      </div>
    </section>

    <!-- Kontakt view -->
    <section id="viewContact" class="hide">
      <div class="panel">
        <div class="panel-head">
          <h2>Kontakt <small>Anfrage senden • Probefahrt • Rückruf</small></h2>
        </div>
        <div class="panel-body">
          <form id="contactForm" class="filters">
            <div class="field span-4">
              <label for="cName">Name</label>
              <input class="control" id="cName" required placeholder="Max Mustermann" />
            </div>
            <div class="field span-4">
              <label for="cEmail">E-Mail</label>
              <input class="control" id="cEmail" type="email" required placeholder="max@mail.de" />
            </div>
            <div class="field span-4">
              <label for="cPhone">Telefon (optional)</label>
              <input class="control" id="cPhone" placeholder="+49..." />
            </div>
            <div class="field span-12">
              <label for="cMsg">Nachricht</label>
              <textarea class="control" id="cMsg" rows="5" required placeholder="Worum geht es? Wunschfahrzeug, Finanzierung, Probefahrt..."></textarea>
            </div>
            <div class="field span-12">
              <div class="actions">
                <div class="actions-left">
                  <button class="btn primary" type="submit">Nachricht senden</button>
                  <button class="btn ghost" type="button" id="btnContactDemo">Demo ausfüllen</button>
                </div>
                <div class="kpis">
                  <span class="chip">Hinweis: In Teil 2 ist E-Mail-Versand als Beispiel enthalten.</span>
                </div>
              </div>
            </div>
          </form>

          <div class="divider"></div>

          <div class="filters">
            <div class="field span-6">
              <label>Adresse</label>
              <div class="control" style="display:flex; align-items:center; justify-content:space-between; gap:10px;">
                <span class="muted" id="addressDisplay"></span>
                <button class="btn" type="button" id="btnCopyAddress">Adresse kopieren</button>
              </div>
            </div>
            <div class="field span-6">
              <label>Telefon / WhatsApp</label>
              <div class="control" style="display:flex; align-items:center; justify-content:space-between; gap:10px;">
                <span class="muted" id="phoneDisplay"></span>
                <div style="display:flex; gap:8px; flex-wrap:wrap;">
                  <button class="btn" type="button" id="btnCall">Anrufen</button>
                  <button class="btn primary" type="button" id="btnWhatsapp">WhatsApp</button>
                </div>
              </div>
            </div>
            <div class="field span-12">
              <label>Map (optional)</label>
              <div class="control" style="min-height:220px; display:grid; place-items:center;">
                <div class="control" style="min-height:220px; padding:12px;">
  <div id="mapConsent">
    <div class="muted" style="margin-bottom:10px;">
      Karte wird erst nach Zustimmung geladen (Datenschutz).
    </div>
    <button class="btn primary" type="button" id="btnLoadMap">Google Maps laden</button>
    <div class="muted" style="margin-top:10px; font-size:12px;">
      Mit dem Laden der Karte können Daten an Google übertragen werden.
    </div>
  </div>

  <div id="mapFrame" class="hide" style="height:220px; border-radius:12px; overflow:hidden; border:1px solid rgba(255,255,255,.10);">
    <!-- iframe wird per JS gesetzt -->
  </div>
</div>
              </div>
            </div>
          </div>

        </div>
      </div>
    </section>

    <!-- Inzahlungnahme view -->
    <section id="viewTrade" class="hide">
      <div class="panel">
        <div class="panel-head">
          <h2>Inzahlungnahme <small>Mehrstufig • Daten • Zustand • Upload • Abschicken</small></h2>
          <div class="kpis">
            <span class="chip">Schritt: <b id="tradeStepInfo">1</b>/4</span>
          </div>
        </div>
        <div class="panel-body">
          <div id="tradeWizard"></div>
        </div>
      </div>
    </section>
<section id="viewFinance" class="hide">
  <div class="panel">
    <div class="panel-head">
      <h2>Finanzierung <small>Budget • Rate • Anfrage</small></h2>
    </div>
    <div class="panel-body">
      <div class="muted">
        Hier kommt dein Finanzierungsblock rein (du hast ihn schon in den AutoHero-Blöcken).
        Wir können ihn hier nochmal als eigene Seite anzeigen oder direkt zur Kontaktanfrage führen.
      </div>
    </div>
  </div>
</section>
    <!-- Rechtliches -->
    <section id="viewLegal" class="hide">
      <div class="panel">
        <div class="panel-head">
          <h2 id="legalTitle">Impressum</h2>
        </div>
        <div class="panel-body" id="legalBody">
          <!-- Teil 2 füllt Inhalte + Template ein -->
        </div>
      </div>
    </section>
  </main>

  <footer>
    <div class="wrap">
      <div class="foot-grid">
        <div>
          <h4>Reichstein Automobile</h4>
          <div class="muted">Edle Online-Präsenz • Fahrzeugsuche • Inzahlungnahme • Kontakt</div>
          <div class="muted" style="margin-top:10px;">© <span id="yearNow"></span> Reichstein Automobile</div>
        </div>
        <div>
          <h4>Navigation</h4>
          <a href="#/fahrzeuge">Fahrzeuge</a>
          <a href="#/favoriten">Favoriten</a>
          <a href="#/vergleich">Vergleich</a>
          <a href="#/inzahlungnahme">Inzahlungnahme</a>
          <a href="#/kontakt">Kontakt</a>
        </div>
        <div>
          <h4>Rechtliches</h4>
          <a href="#/impressum">Impressum</a>
          <a href="#/datenschutz">Datenschutz</a>
        </div>
      </div>
    </div>
  </footer>

  <!-- Vehicle Details Modal -->
  <div class="overlay" id="detailsOverlay" role="dialog" aria-modal="true" aria-labelledby="detailsTitle">
    <div class="modal">
      <div class="modal-head">
        <h3 id="detailsTitle">Fahrzeugdetails</h3>
        <div style="display:flex; gap:8px; flex-wrap:wrap;">
          <button class="btn" id="btnDetailsFav">★ Favorit</button>
          <button class="btn" id="btnDetailsCmp">⇄ Vergleich</button>
          <button class="btn ghost" id="btnCloseDetails">Schließen ✕</button>
        </div>
      </div>
      <div class="modal-body" id="detailsBody">
        <!-- Teil 2: Details-Inhalt wird dynamisch gebaut -->
      </div>
    </div>
  </div>

  <div class="toast" id="toast"></div>

  <script>
    // =========================
// Reichstein – Konfiguration (Firmendaten)
// =========================
const CONFIG = {
  company: "Reichstein Automobile",
  street: "Koloniestr. 91–93",
  zipCity: "13359 Berlin",
  phoneDisplay: "030 – 74374315",
  phoneTel: "+493074374315",            // für tel: Links
  email: "info@reichsteinautomobile.de",
  whatsappE164: "493074374315",         // WhatsApp Landline (falls WA Business aktiv)
  hours: [
    ["Montag", "09:30 – 18:30"],
    ["Dienstag", "09:30 – 18:30"],
    ["Mittwoch", "09:30 – 18:30"],
    ["Donnerstag", "09:30 – 18:30"],
    ["Freitag", "09:30 – 18:30"],
    ["Samstag", "09:30 – 15:00"],
    ["Sonntag", "Geschlossen"]
  ],
  // Google Maps: Adresse als Query
  mapsQuery: "Reichstein Automobile, Koloniestr. 91-93, 13359 Berlin"
};
    const VEHICLES = [
      {
        id: "ra-1001",
        make: "BMW",
        model: "320d Touring",
        bodyType: "Kombi",
        trim: "M Sport",
        price: 28990,
        year: 2020,
        km: 69900,
        fuel: "Diesel",
        gear: "Automatik",
        power: 190,
        color: "Schwarz",
        doors: 5,
        owners: 2,
        firstReg: "2020-05",
        createdAt: daysAgo(3),
        images: [
          "https://images.unsplash.com/photo-1542362567-b07e54358753?auto=format&fit=crop&w=1400&q=70",
          "https://images.unsplash.com/photo-1503376780353-7e6692767b70?auto=format&fit=crop&w=1400&q=70",
          "https://images.unsplash.com/photo-1555215695-3004980ad54e?auto=format&fit=crop&w=1400&q=70"
        ],
        features: ["LED-Scheinwerfer", "Navigation", "Sportfahrwerk", "Sitzheizung", "PDC", "Tempomat", "Bluetooth"],
        notes: "Scheckheft gepflegt, Top Zustand. Finanzierung möglich."
      },
      {
        id: "ra-1002",
        make: "Audi",
        model: "A4 Avant",
        bodyType: "Kombi",
        trim: "S line",
        price: 26990,
        year: 2019,
        km: 84500,
        fuel: "Benzin",
        gear: "Automatik",
        power: 190,
        color: "Grau",
        doors: 5,
        owners: 1,
        firstReg: "2019-09",
        createdAt: daysAgo(9),
        images: [
          "https://images.unsplash.com/photo-1525609004556-c46c7d6cf023?auto=format&fit=crop&w=1400&q=70",
          "https://images.unsplash.com/photo-1517524206127-48bbd363f3f7?auto=format&fit=crop&w=1400&q=70",
          "https://images.unsplash.com/photo-1523983388277-336a66bf9bcd?auto=format&fit=crop&w=1400&q=70"
        ],
        features: ["Virtual Cockpit", "Navigation", "S line", "Sitzheizung", "Kamera", "Keyless", "CarPlay"],
        notes: "Sehr gepflegt, Nichtraucherfahrzeug."
      },
      {
        id: "ra-1003",
        make: "Mercedes-Benz",
        model: "C 220d",
        bodyType: "Limousine",
        trim: "AMG Line",
        price: 31990,
        year: 2021,
        km: 49900,
        fuel: "Diesel",
        gear: "Automatik",
        power: 200,
        color: "Weiß",
        doors: 4,
        owners: 1,
        firstReg: "2021-03",
        createdAt: daysAgo(1),
        images: [
          "https://images.unsplash.com/photo-1541899481282-d53bffe3c35d?auto=format&fit=crop&w=1400&q=70",
          "https://images.unsplash.com/photo-1520052205864-92d242b3a76b?auto=format&fit=crop&w=1400&q=70",
          "https://images.unsplash.com/photo-1533473359331-0135ef1b58bf?auto=format&fit=crop&w=1400&q=70"
        ],
        features: ["AMG Line", "MBUX", "LED", "Sitzheizung", "Tempomat", "PDC", "Bluetooth"],
        notes: "Top Ausstattung. Probefahrt nach Termin."
      },
      {
        id: "ra-1004",
        make: "Volkswagen",
        model: "Golf VII",
        bodyType: "Kompakt",
        trim: "Highline",
        price: 15990,
        year: 2018,
        km: 98000,
        fuel: "Benzin",
        gear: "Schaltgetriebe",
        power: 125,
        color: "Blau",
        doors: 5,
        owners: 2,
        firstReg: "2018-06",
        createdAt: daysAgo(22),
        images: [
          "https://images.unsplash.com/photo-1541443131876-44b03de101c5?auto=format&fit=crop&w=1400&q=70",
          "https://images.unsplash.com/photo-1492144534655-ae79c964c9d7?auto=format&fit=crop&w=1400&q=70",
          "https://images.unsplash.com/photo-1519641471654-76ce0107ad1b?auto=format&fit=crop&w=1400&q=70"
        ],
        features: ["Navigation", "Sitzheizung", "Tempomat", "Bluetooth", "PDC"],
        notes: "Preis-Leistung stark. Sofort verfügbar."
      },
      {
        id: "ra-1005",
        make: "Tesla",
        model: "Model 3",
        bodyType: "Limousine",
        trim: "Long Range",
        price: 34990,
        year: 2020,
        km: 65000,
        fuel: "Elektro",
        gear: "Automatik",
        power: 351,
        color: "Rot",
        doors: 4,
        owners: 1,
        firstReg: "2020-11",
        createdAt: daysAgo(12),
        images: [
          "https://images.unsplash.com/photo-1619767886558-efdc259cde1d?auto=format&fit=crop&w=1400&q=70",
          "https://images.unsplash.com/photo-1614200187524-dc4b892acf16?auto=format&fit=crop&w=1400&q=70",
          "https://images.unsplash.com/photo-1603386329225-868f9b1ee6d9?auto=format&fit=crop&w=1400&q=70"
        ],
        features: ["Autopilot", "Glasdach", "Kamera", "Navi", "App-Steuerung"],
        notes: "Sehr guter Zustand. Ladeequipment dabei."
      },
      {
        id: "ra-1006",
        make: "Porsche",
        model: "Macan",
        bodyType: "SUV",
        trim: "S",
        price: 58900,
        year: 2019,
        km: 72000,
        fuel: "Benzin",
        gear: "Automatik",
        power: 354,
        color: "Schwarz",
        doors: 5,
        owners: 2,
        firstReg: "2019-02",
        createdAt: daysAgo(5),
        images: [
          "https://images.unsplash.com/photo-1502877338535-766e1452684a?auto=format&fit=crop&w=1400&q=70",
          "https://images.unsplash.com/photo-1503736334956-4c8f8e92946d?auto=format&fit=crop&w=1400&q=70",
          "https://images.unsplash.com/photo-1511919884226-fd3cad34687c?auto=format&fit=crop&w=1400&q=70"
        ],
        features: ["Sport Chrono", "PASM", "Panorama", "Kamera", "Sitzbelüftung", "Navi"],
        notes: "Premium SUV, sehr gepflegt."
      }
    ];

    // =========================
    // State
    // =========================
    const state = {
      route: "#/fahrzeuge",
      page: 1,
      perPage: 9,
      onlyFav: false,
      onlyNew: false,
      selectedVehicleId: null,
      fav: new Set(loadLS("ra_fav", [])),
      cmp: new Set(loadLS("ra_cmp", []))
    };

    // =========================
    // Helpers
    // =========================
    function daysAgo(n){
      const d = new Date();
      d.setDate(d.getDate() - n);
      return d.toISOString();
    }
    function formatEUR(n){
      return new Intl.NumberFormat("de-DE", { style:"currency", currency:"EUR", maximumFractionDigits: 0 }).format(n);
    }
    function formatKM(n){
      return new Intl.NumberFormat("de-DE").format(n) + " km";
    }
    function clampInt(val, min, max){
      const n = parseInt(String(val||"").replace(/[^\d]/g,""), 10);
      if (Number.isNaN(n)) return null;
      return Math.max(min, Math.min(max, n));
    }
    function uniq(arr){ return Array.from(new Set(arr)); }
    function byId(id){ return document.getElementById(id); }
    function saveLS(key, val){ localStorage.setItem(key, JSON.stringify(val)); }
    function loadLS(key, fallback){
      try{
        const v = JSON.parse(localStorage.getItem(key) || "null");
        return v ?? fallback;
      }catch{ return fallback; }
    }
    function toast(msg, sub=""){
      const wrap = byId("toast");
      const el = document.createElement("div");
      el.className = "t";
      el.innerHTML = `<div><div>${escapeHtml(msg)}</div>${sub?`<small>${escapeHtml(sub)}</small>`:""}</div>
                      <button class="iconbtn" aria-label="Toast schließen" style="width:32px;height:32px;">✕</button>`;
      el.querySelector("button").onclick = ()=> el.remove();
      wrap.appendChild(el);
      setTimeout(()=>{ if (el.isConnected) el.remove(); }, 4200);
    }
    function escapeHtml(s){
      return String(s).replace(/[&<>"']/g, m=>({ "&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;" }[m]));
    }

    // =========================
    // Init: Populate select options
    // =========================
    function initFilters(){
      const makes = ["Alle", ...uniq(VEHICLES.map(v=>v.make)).sort()];
      const fuels = ["Alle", ...uniq(VEHICLES.map(v=>v.fuel)).sort()];
      const gears = ["Alle", ...uniq(VEHICLES.map(v=>v.gear)).sort()];

      const years = uniq(VEHICLES.map(v=>v.year)).sort((a,b)=>a-b);
      const yearOpts = ["Alle", ...years];

      fillSelect("make", makes);
      fillSelect("fuel", fuels);
      fillSelect("gear", gears);
      fillSelect("yearMin", yearOpts);
      fillSelect("yearMax", yearOpts);
      const bodies = ["Alle", ...uniq(VEHICLES.map(v=>v.bodyType).filter(Boolean)).sort()];
fillSelect("bodyType", bodies);
byId("bodyType").value = "Alle";

      // defaults
      byId("make").value = "Alle";
      byId("fuel").value = "Alle";
      byId("gear").value = "Alle";
      byId("yearMin").value = "Alle";
      byId("yearMax").value = "Alle";
      byId("perPage").value = String(state.perPage);
    }

    function fillSelect(id, options){
      const sel = byId(id);
      sel.innerHTML = "";
      for(const opt of options){
        const o = document.createElement("option");
        o.value = opt;
        o.textContent = opt;
        sel.appendChild(o);
      }
    }

    // =========================
    // Filtering, Sorting, Pagination
    // =========================
    function getFilters(){
      const q = (byId("q").value || "").trim().toLowerCase();
      const make = byId("make").value;
      const fuel = byId("fuel").value;
      const gear = byId("gear").value;
      const bodyType = byId("bodyType").value;
      const yearMin = byId("yearMin").value === "Alle" ? null : parseInt(byId("yearMin").value, 10);
      const yearMax = byId("yearMax").value === "Alle" ? null : parseInt(byId("yearMax").value, 10);
      const priceMin = clampInt(byId("priceMin").value, 0, 9999999);
      const priceMax = clampInt(byId("priceMax").value, 0, 9999999);
      const kmMin = clampInt(byId("kmMin").value, 0, 9999999);
      const kmMax = clampInt(byId("kmMax").value, 0, 9999999);
      const sort = byId("sort").value;
      const perPage = parseInt(byId("perPage").value, 10) || 9;

      return { q, make, fuel, gear, yearMin, yearMax, priceMin, priceMax, kmMin, kmMax, sort, perPage, bodyType,};
    }

    function applyQuery(list, q){
      if(!q) return list;
      return list.filter(v=>{
        const hay = `${v.make} ${v.model} ${v.trim} ${v.fuel} ${v.gear} ${v.notes} ${v.features.join(" ")}`.toLowerCase();
        return hay.includes(q);
      });
    }

    function applyFilters(){
      const f = getFilters();
      state.perPage = f.perPage;

      let list = [...VEHICLES];

      if(state.onlyFav){
        list = list.filter(v=> state.fav.has(v.id));
      }
      if(state.onlyNew){
        const cutoff = new Date();
        cutoff.setDate(cutoff.getDate() - 14);
        list = list.filter(v=> new Date(v.createdAt) >= cutoff);
      }

      list = applyQuery(list, f.q);
      if(f.make !== "Alle") list = list.filter(v=> v.make === f.make);
      if(f.fuel !== "Alle") list = list.filter(v=> v.fuel === f.fuel);
      if(f.gear !== "Alle") list = list.filter(v=> v.gear === f.gear);
      if(f.bodyType && f.bodyType !== "Alle") list = list.filter(v=> v.bodyType === f.bodyType);
      if(f.yearMin != null) list = list.filter(v=> v.year >= f.yearMin);
      if(f.yearMax != null) list = list.filter(v=> v.year <= f.yearMax);
      if(f.priceMin != null) list = list.filter(v=> v.price >= f.priceMin);
      if(f.priceMax != null) list = list.filter(v=> v.price <= f.priceMax);
      if(f.kmMin != null) list = list.filter(v=> v.km >= f.kmMin);
      if(f.kmMax != null) list = list.filter(v=> v.km <= f.kmMax);

      list = sortVehicles(list, f.sort);

      return list;
    }

    function sortVehicles(list, mode){
      const copy = [...list];
      switch(mode){
        case "price_asc": return copy.sort((a,b)=>a.price-b.price);
        case "price_desc": return copy.sort((a,b)=>b.price-a.price);
        case "km_asc": return copy.sort((a,b)=>a.km-b.km);
        case "km_desc": return copy.sort((a,b)=>b.km-a.km);
        case "year_asc": return copy.sort((a,b)=>a.year-b.year);
        case "year_desc": return copy.sort((a,b)=>b.year-a.year);
        case "newest":
        default:
          return copy.sort((a,b)=> new Date(b.createdAt)-new Date(a.createdAt));
      }
    }

    function paginate(list){
      const total = list.length;
      const perPage = state.perPage;
      const pages = Math.max(1, Math.ceil(total / perPage));
      state.page = Math.max(1, Math.min(state.page, pages));
      const start = (state.page - 1) * perPage;
      const end = start + perPage;
      return { slice: list.slice(start, end), total, pages, start, end: Math.min(end, total) };
    }

    // =========================
    // Render
    // =========================
    function render(){
      // KPIs
      byId("yearNow").textContent = new Date().getFullYear();
      byId("kpiTotal").textContent = String(VEHICLES.length);
      byId("kpiAvg").textContent = formatEUR(Math.round(VEHICLES.reduce((s,v)=>s+v.price,0)/VEHICLES.length));
      byId("kpiNew").textContent = String(VEHICLES.filter(v=>{
        const cutoff = new Date(); cutoff.setDate(cutoff.getDate()-14);
        return new Date(v.createdAt) >= cutoff;
      }).length);

      // counts
      const favN = state.fav.size;
      const cmpN = state.cmp.size;
      byId("favCount").querySelector("b").textContent = String(favN);
      byId("cmpCount").querySelector("b").textContent = String(cmpN);
      byId("kpiFav").textContent = String(favN);
      byId("kpiCmp").textContent = String(cmpN);
      byId("favCount2").textContent = String(favN);
      byId("cmpCount2").textContent = String(cmpN);

      // route views
      setActiveRouteView();

      // cars view render
      if(state.route === "#/fahrzeuge"){
        const list = applyFilters();
        const { slice, total, pages, start, end } = paginate(list);

        byId("hitCount").textContent = String(total);
        byId("pageInfo").textContent = `${state.page} / ${pages}`;
        byId("showingInfo").textContent = total ? `${start+1}–${end} von ${total}` : "0";
        renderGrid(byId("resultsGrid"), slice);

        byId("btnPrev").disabled = (state.page <= 1);
        byId("btnNext").disabled = (state.page >= pages);
        byId("btnPrev").style.opacity = byId("btnPrev").disabled ? .55 : 1;
        byId("btnNext").style.opacity = byId("btnNext").disabled ? .55 : 1;
      }

      // favorites view
      if(state.route === "#/favoriten"){
        const list = VEHICLES.filter(v=> state.fav.has(v.id));
        byId("favEmpty").classList.toggle("hide", list.length !== 0);
        renderGrid(byId("favGrid"), list);
      }

      // compare view
      if(state.route === "#/vergleich"){
        renderCompare();
      }
    }

    function renderGrid(container, list){
      container.innerHTML = "";
      for(const v of list){
        const el = document.createElement("article");
        el.className = "card";
        el.innerHTML = `
          <div class="thumb" role="button" tabindex="0" aria-label="Details öffnen: ${escapeHtml(v.make)} ${escapeHtml(v.model)}">
            <img src="${escapeHtml(v.images?.[0] || "")}" alt="${escapeHtml(v.make+" "+v.model)}" loading="lazy">
            <div class="tagbar">
              <div class="tag"><span class="dot"></span>${escapeHtml(v.fuel)} • ${escapeHtml(v.gear)}</div>
              <div class="tag price">${escapeHtml(formatEUR(v.price))}</div>
            </div>
          </div>
          <div class="card-body">
            <div class="title">
              <div>
                <h3>${escapeHtml(v.make)} ${escapeHtml(v.model)} <span class="muted">• ${escapeHtml(v.trim)}</span></h3>
                <div class="sub">${escapeHtml(String(v.year))} • ${escapeHtml(formatKM(v.km))} • ${escapeHtml(v.power)} PS</div>
              </div>
              <button class="iconbtn ${state.fav.has(v.id) ? "active":""}" aria-label="Favorit" title="Favorit" data-fav="${escapeHtml(v.id)}">★</button>
            </div>

            <div class="specs">
              <div class="spec"><span>Erstzulassung</span><b>${escapeHtml(v.firstReg)}</b></div>
              <div class="spec"><span>Farbe</span><b>${escapeHtml(v.color)}</b></div>
              <div class="spec"><span>Vorbesitzer</span><b>${escapeHtml(String(v.owners))}</b></div>
            </div>
          </div>
          <div class="card-foot">
            <button class="btn primary" data-open="${escapeHtml(v.id)}">Details</button>
            <button class="btn ${state.cmp.has(v.id) ? "primary":""}" data-cmp="${escapeHtml(v.id)}">⇄ Vergleich</button>
            <button class="btn" data-ask="${escapeHtml(v.id)}">Anfrage</button>
          </div>
        `;

        // thumb click open
        const thumb = el.querySelector(".thumb");
        thumb.addEventListener("click", ()=> openDetails(v.id));
        thumb.addEventListener("keydown", (e)=>{ if(e.key==="Enter"||e.key===" "){ e.preventDefault(); openDetails(v.id);} });

        // buttons
        el.querySelector("[data-open]").addEventListener("click", ()=> openDetails(v.id));
        el.querySelector("[data-ask]").addEventListener("click", ()=> quickInquiry(v.id));
        el.querySelector("[data-fav]").addEventListener("click", (e)=>{ e.stopPropagation(); toggleFav(v.id); });
        el.querySelector("[data-cmp]").addEventListener("click", (e)=>{ e.stopPropagation(); toggleCmp(v.id); });

        container.appendChild(el);
      }
    }

    // =========================
    // Favorites / Compare
    // =========================
    function toggleFav(id){
      if(state.fav.has(id)){
        state.fav.delete(id);
        toast("Aus Favoriten entfernt", id);
      }else{
        state.fav.add(id);
        toast("Zu Favoriten hinzugefügt", id);
      }
      saveLS("ra_fav", Array.from(state.fav));
      render();
    }

    function toggleCmp(id){
      if(state.cmp.has(id)){
        state.cmp.delete(id);
        toast("Aus Vergleich entfernt", id);
      }else{
        if(state.cmp.size >= 3){
          toast("Vergleich ist voll", "Maximal 3 Fahrzeuge gleichzeitig.");
          return;
        }
        state.cmp.add(id);
        toast("Zum Vergleich hinzugefügt", id);
      }
      saveLS("ra_cmp", Array.from(state.cmp));
      render();
    }

    function renderCompare(){
      const wrap = byId("cmpWrap");
      const ids = Array.from(state.cmp);
      const cars = ids.map(id=> VEHICLES.find(v=>v.id===id)).filter(Boolean);

      byId("cmpEmpty").classList.toggle("hide", cars.length !== 0);

      if(!cars.length){
        wrap.innerHTML = "";
        return;
      }

      // Build comparison table
      const rows = [
        ["Preis", (v)=>formatEUR(v.price)],
        ["Marke/Modell", (v)=>`${v.make} ${v.model}`],
        ["Variante", (v)=>v.trim],
        ["Erstzulassung", (v)=>String(v.year)],
        ["Kilometer", (v)=>formatKM(v.km)],
        ["Kraftstoff", (v)=>v.fuel],
        ["Getriebe", (v)=>v.gear],
        ["Leistung", (v)=>`${v.power} PS`],
        ["Farbe", (v)=>v.color],
        ["Vorbesitzer", (v)=>String(v.owners)]
      ];

      const header = `
        <div class="grid" style="margin:0;">
          ${cars.map(v=>`
            <div class="card" style="grid-column: span 4;">
              <div class="thumb">
                <img src="${escapeHtml(v.images?.[0]||"")}" alt="${escapeHtml(v.make+" "+v.model)}">
                <div class="tagbar">
                  <div class="tag"><span class="dot"></span>${escapeHtml(v.fuel)} • ${escapeHtml(v.gear)}</div>
                  <div class="tag price">${escapeHtml(formatEUR(v.price))}</div>
                </div>
              </div>
              <div class="card-body">
                <div class="title">
                  <div>
                    <h3>${escapeHtml(v.make)} ${escapeHtml(v.model)}</h3>
                    <div class="sub">${escapeHtml(v.trim)} • ${escapeHtml(String(v.year))}</div>
                  </div>
                  <button class="iconbtn" title="Entfernen" data-rm="${escapeHtml(v.id)}">✕</button>
                </div>
                <div class="card-foot">
                  <button class="btn primary" data-open="${escapeHtml(v.id)}">Details</button>
                  <button class="btn" data-ask="${escapeHtml(v.id)}">Anfrage</button>
                </div>
              </div>
            </div>
          `).join("")}
        </div>
      `;

      const body = `
        <div class="panel" style="margin-top:12px;">
          <div class="panel-head"><h2>Vergleichsdaten <small>Übersicht</small></h2></div>
          <div class="panel-body" style="overflow:auto;">
            <div style="min-width:760px;">
              ${rows.map(([label, fn])=>`
                <div class="li" style="grid-template-columns:1fr; margin-bottom:8px;">
                  <div style="display:grid; grid-template-columns: 220px repeat(${cars.length}, 1fr); gap:10px; align-items:center;">
                    <span>${escapeHtml(label)}</span>
                    ${cars.map(v=>`<b style="font-weight:700;">${escapeHtml(fn(v))}</b>`).join("")}
                  </div>
                </div>
              `).join("")}
            </div>
          </div>
        </div>
      `;

      wrap.innerHTML = header + body;

      wrap.querySelectorAll("[data-open]").forEach(btn=>{
        btn.addEventListener("click", ()=> openDetails(btn.getAttribute("data-open")));
      });
      wrap.querySelectorAll("[data-ask]").forEach(btn=>{
        btn.addEventListener("click", ()=> quickInquiry(btn.getAttribute("data-ask")));
      });
      wrap.querySelectorAll("[data-rm]").forEach(btn=>{
        btn.addEventListener("click", ()=>{
          state.cmp.delete(btn.getAttribute("data-rm"));
          saveLS("ra_cmp", Array.from(state.cmp));
          render();
        });
      });
    }

    // =========================
    // Details modal (Teil 2 baut den Inhalt komplett aus)
    // =========================
    function openDetails(id){
      state.selectedVehicleId = id;
      byId("detailsOverlay").classList.add("show");
      byId("detailsBody").innerHTML = `
        <div class="muted">Lade Details…</div>
        <div class="divider"></div>
        <div class="muted">In Teil 2 werden hier Galerie, Ausstattung, Anfrage-CTA, WhatsApp/Telefon etc. gerendert.</div>
      `;

      const v = VEHICLES.find(x=>x.id===id);
      byId("detailsTitle").textContent = v ? `${v.make} ${v.model} • ${v.trim}` : "Fahrzeugdetails";

      // update action buttons states
      byId("btnDetailsFav").classList.toggle("primary", state.fav.has(id));
      byId("btnDetailsCmp").classList.toggle("primary", state.cmp.has(id));

      // In Teil 2: renderDetails(v)
      // Für jetzt: Minimal-Preview
      if(v){
        byId("detailsBody").innerHTML = `
          <div class="two-col">
            <div class="gallery">
              <div class="gallery-main">
                <img src="${escapeHtml(v.images?.[0]||"")}" alt="${escapeHtml(v.make+" "+v.model)}">
              </div>
              <div class="gallery-strip">
                ${(v.images||[]).map((src,i)=>`
                  <div class="thumb2 ${i===0?"active":""}">
                    <img src="${escapeHtml(src)}" alt="Bild ${i+1}">
                  </div>
                `).join("")}
              </div>
            </div>

            <div class="sidebox">
              <div>
                <div class="muted">Preis</div>
                <div class="pricebig">${escapeHtml(formatEUR(v.price))}</div>
                <div class="muted" style="margin-top:4px;">${escapeHtml(String(v.year))} • ${escapeHtml(formatKM(v.km))} • ${escapeHtml(v.power)} PS</div>
              </div>

              <div class="list">
                <div class="li"><span>Kraftstoff</span><b>${escapeHtml(v.fuel)}</b></div>
                <div class="li"><span>Getriebe</span><b>${escapeHtml(v.gear)}</b></div>
                <div class="li"><span>Farbe</span><b>${escapeHtml(v.color)}</b></div>
                <div class="li"><span>Vorbesitzer</span><b>${escapeHtml(String(v.owners))}</b></div>
              </div>

              <button class="btn primary" onclick="quickInquiry('${escapeHtml(v.id)}')">Anfrage senden</button>
              <button class="btn" onclick="toggleFav('${escapeHtml(v.id)}')">★ Favorit</button>
              <button class="btn" onclick="toggleCmp('${escapeHtml(v.id)}')">⇄ Vergleich</button>

              <div class="muted" style="font-size:12px;">
                Hinweis: In Teil 2 kommen WhatsApp/Telefon-Buttons + Ausstattungsliste + Beschreibung.
              </div>
            </div>
          </div>
        `;
      }
    }

    function closeDetails(){
      byId("detailsOverlay").classList.remove("show");
      state.selectedVehicleId = null;
    }

    // =========================
    // Quick inquiry (Teil 2 erweitert zu sauberem Formular mit Fahrzeugbezug)
    // =========================
    function quickInquiry(id){
      const v = VEHICLES.find(x=>x.id===id);
      location.hash = "#/kontakt";
      setTimeout(()=>{
        byId("cMsg").value = v
          ? `Hallo, ich interessiere mich für: ${v.make} ${v.model} (${v.trim}) – ID: ${v.id}. Bitte um Rückmeldung.`
          : "Hallo, ich interessiere mich für ein Fahrzeug. Bitte um Rückmeldung.";
        toast("Kontaktformular vorbereitet", v ? `${v.make} ${v.model}` : "");
      }, 60);
    }

    // =========================
    // Router (hash-based)
    // =========================
    function setRoute(hash){
      state.route = hash || "#/fahrzeuge";
      // reset page when changing primary list views
      if(state.route === "#/fahrzeuge") state.page = 1;
      render();
      // scroll top of main
      window.scrollTo({ top: 0, behavior: "smooth" });
    }

    function setActiveRouteView(){
      const r = state.route;

      // toggle views
      byId("viewCars").classList.toggle("hide", r !== "#/fahrzeuge");
      byId("viewFav").classList.toggle("hide", r !== "#/favoriten");
      byId("viewCompare").classList.toggle("hide", r !== "#/vergleich");
      byId("viewContact").classList.toggle("hide", r !== "#/kontakt");
      byId("viewFinance").classList.toggle("hide", r !== "#/finanzierung");
      byId("viewTrade").classList.toggle("hide", r !== "#/inzahlungnahme");
      byId("viewLegal").classList.toggle("hide", !(r === "#/impressum" || r === "#/datenschutz"));

      // hero only on cars
      byId("hero").classList.toggle("hide", r !== "#/fahrzeuge");

      // nav active feel
      const map = {
        "#/fahrzeuge": "navCars",
        "#/favoriten": "navFav",
        "#/vergleich": "navCompare",
        "#/kontakt": "navContact",
        "#/inzahlungnahme": "navTrade",
        "#/finanzierung": "navFinance",
      };
      Object.values(map).forEach(id=> byId(id).classList.remove("primary"));
      if(map[r]) byId(map[r]).classList.add("primary");

      // legal titles placeholder (Teil 2 füllt die Inhalte)
      if(r === "#/impressum"){
        byId("legalTitle").textContent = "Impressum";
        byId("legalBody").innerHTML = `<div class="muted">In Teil 2: Impressum-Template (Platzhalter) + Struktur.</div>`;
      }
      if(r === "#/datenschutz"){
        byId("legalTitle").textContent = "Datenschutz";
        byId("legalBody").innerHTML = `<div class="muted">In Teil 2: Datenschutz-Template (Platzhalter) + Map-Consent-Hinweis.</div>`;
      }

      // trade wizard placeholder
      if(r === "#/inzahlungnahme"){
        byId("tradeWizard").innerHTML = `<div class="muted">In Teil 2: kompletter Multi-Step Wizard (4 Schritte) inkl. Upload-Felder & Zusammenfassung.</div>`;
        byId("tradeStepInfo").textContent = "1";
      }
    }

    // =========================
    // Events
    // =========================
    function bindEvents(){
          // Karosserie-Quickfilter (oben)
document.querySelectorAll(".bodychip").forEach(btn=>{
  btn.addEventListener("click", ()=>{
    const bt = btn.getAttribute("data-body");

    document.querySelectorAll(".bodychip").forEach(x=>x.classList.remove("active"));
    btn.classList.add("active");

    location.hash = "#/fahrzeuge";
    setTimeout(()=>{
      const sel = document.getElementById("bodyType");
      if(sel){
        sel.value = (bt === "Alle") ? "Alle" : bt;
      }
      state.page = 1;
      render();
      window.scrollTo({ top: document.getElementById("viewCars").offsetTop - 80, behavior:"smooth" });
    }, 60);
  });
});
      window.addEventListener("hashchange", ()=> setRoute(location.hash || "#/fahrzeuge"));

      byId("filterForm").addEventListener("submit", (e)=>{
        e.preventDefault();
        state.page = 1;
        render();
        toast("Filter angewendet");
      });

      byId("btnReset").addEventListener("click", ()=>{
        byId("q").value = "";
        byId("make").value = "Alle";
        byId("fuel").value = "Alle";
        byId("gear").value = "Alle";
        byId("yearMin").value = "Alle";
        byId("yearMax").value = "Alle";
        byId("priceMin").value = "";
        byId("priceMax").value = "";
        byId("kmMin").value = "";
        byId("kmMax").value = "";
        byId("sort").value = "newest";
        byId("perPage").value = "9";
        state.perPage = 9;
        state.onlyFav = false;
        state.onlyNew = false;
        byId("btnOnlyFav").classList.remove("primary");
        byId("btnOnlyNew").classList.remove("primary");
        state.page = 1;
        render();
        toast("Zurückgesetzt");
      });

      byId("btnOnlyFav").addEventListener("click", ()=>{
        state.onlyFav = !state.onlyFav;
        byId("btnOnlyFav").classList.toggle("primary", state.onlyFav);
        state.page = 1;
        render();
        toast(state.onlyFav ? "Nur Favoriten aktiv" : "Nur Favoriten aus");
      });

      byId("btnOnlyNew").addEventListener("click", ()=>{
        state.onlyNew = !state.onlyNew;
        byId("btnOnlyNew").classList.toggle("primary", state.onlyNew);
        state.page = 1;
        render();
        toast(state.onlyNew ? "Neu-Filter aktiv" : "Neu-Filter aus", "Neu = ≤ 14 Tage");
      });

      byId("btnPrev").addEventListener("click", ()=>{
        state.page = Math.max(1, state.page - 1);
        render();
        window.scrollTo({ top: byId("viewCars").offsetTop - 80, behavior: "smooth" });
      });

      byId("btnNext").addEventListener("click", ()=>{
        state.page += 1;
        render();
        window.scrollTo({ top: byId("viewCars").offsetTop - 80, behavior: "smooth" });
      });

      byId("btnClearFav").addEventListener("click", ()=>{
        state.fav.clear();
        saveLS("ra_fav", []);
        toast("Favoriten gelöscht");
        render();
      });

      byId("btnClearCmp").addEventListener("click", ()=>{
        state.cmp.clear();
        saveLS("ra_cmp", []);
        toast("Vergleich geleert");
        render();
      });

      // hero actions
      byId("btnScrollToResults").addEventListener("click", ()=>{
        const top = byId("viewCars").offsetTop - 80;
        window.scrollTo({ top, behavior:"smooth" });
      });
      byId("btnOpenTradeFromHero").addEventListener("click", ()=> location.hash = "#/inzahlungnahme");
      byId("btnQuickContact").addEventListener("click", ()=> location.hash = "#/kontakt");

      // details modal
      byId("btnCloseDetails").addEventListener("click", closeDetails);
      byId("detailsOverlay").addEventListener("click", (e)=>{
        if(e.target === byId("detailsOverlay")) closeDetails();
      });
      document.addEventListener("keydown", (e)=>{
        if(e.key === "Escape" && byId("detailsOverlay").classList.contains("show")) closeDetails();
      });
      byId("btnDetailsFav").addEventListener("click", ()=>{
        if(state.selectedVehicleId) toggleFav(state.selectedVehicleId);
      });
      byId("btnDetailsCmp").addEventListener("click", ()=>{
        if(state.selectedVehicleId) toggleCmp(state.selectedVehicleId);
      });

      // contact
      byId("contactForm").addEventListener("submit", (e)=>{
        e.preventDefault();
        // Teil 2: echte Verarbeitung (Mail/Backend). Hier: Demo-Toast.
        toast("Nachricht gesendet (Demo)", "In Teil 2 wird das an E-Mail/CRM angebunden.");
        byId("contactForm").reset();
      });
      byId("btnContactDemo").addEventListener("click", ()=>{
        byId("cName").value = "Max Mustermann";
        byId("cEmail").value = "max@mail.de";
        byId("cPhone").value = "+49 171 0000000";
        byId("cMsg").value = "Hallo, ich hätte gerne eine Probefahrt / Finanzierungsauskunft. Bitte um Rückruf.";
      });

      // address/phone demo
      byId("btnCopyAddress").addEventListener("click", async ()=>{
        const addr = "Reichstein Automobile, Straße 1, 00000 Stadt";
        try{
          await navigator.clipboard.writeText(addr);
          toast("Adresse kopiert", addr);
        }catch{
          toast("Kopieren nicht möglich", "Bitte manuell kopieren.");
        }
      });
      byId("btnCall").addEventListener("click", ()=>{
  window.location.href = `tel:${CONFIG.phoneTel}`;
});
      byId("btnWhatsapp").addEventListener("click", ()=>{
  const text = encodeURIComponent(`Hallo ${CONFIG.company}, ich habe eine Frage zu einem Fahrzeug.`);
  window.open(`https://wa.me/${CONFIG.whatsappE164}?text=${text}`, "_blank");
});
    }

    // =========================
    // Boot
    // =========================
    initFilters();
    bindEvents();
    // ===== AutoHero-like Start: Brands + Budget =====
function initAutoHeroBlocks(){
  // Brands (aus deinen VEHICLES)
  const brandsEl = document.getElementById("ahBrands");
  if(brandsEl){
    const makes = Array.from(new Set(VEHICLES.map(v=>v.make))).sort().slice(0, 10);
    brandsEl.innerHTML = makes.map(m=>`
      <div class="ah-brand" data-make="${escapeHtml(m)}">
        <div style="font-weight:800;font-size:18px;">${escapeHtml(m[0])}</div>
        <b>${escapeHtml(m)}</b>
      </div>
    `).join("");

    brandsEl.querySelectorAll("[data-make]").forEach(x=>{
      x.addEventListener("click", ()=>{
        location.hash = "#/fahrzeuge";
        setTimeout(()=>{
          document.getElementById("make").value = x.getAttribute("data-make");
          state.page = 1;
          render();
          window.scrollTo({ top: document.getElementById("viewCars").offsetTop - 80, behavior:"smooth" });
        }, 50);
      });
    });
  }

  // Search
  const s = document.getElementById("ahSearch");
  const b = document.getElementById("ahSearchBtn");
  const all = document.getElementById("ahOpenAll");
  const goSearch = ()=>{
    const val = (s?.value||"").trim();
    location.hash = "#/fahrzeuge";
    setTimeout(()=>{
      document.getElementById("q").value = val;
      state.page = 1;
      render();
      window.scrollTo({ top: document.getElementById("viewCars").offsetTop - 80, behavior:"smooth" });
    }, 50);
  };
  if(b && s){
    b.addEventListener("click", goSearch);
    s.addEventListener("keydown", (e)=>{ if(e.key==="Enter"){ e.preventDefault(); goSearch(); }});
  }
  if(all){
    all.addEventListener("click", ()=>{
      location.hash = "#/fahrzeuge";
      setTimeout(()=>{
        state.page = 1;
        render();
        window.scrollTo({ top: document.getElementById("viewCars").offsetTop - 80, behavior:"smooth" });
      }, 50);
    });
  }

  // Tabs (nur optisch – Mode merken)
  let budgetMode = "month";
  document.querySelectorAll(".ah-tab").forEach(t=>{
    t.addEventListener("click", ()=>{
      document.querySelectorAll(".ah-tab").forEach(x=>x.classList.remove("active"));
      t.classList.add("active");
      budgetMode = t.getAttribute("data-mode") || "month";
      calcBudget();
    });
  });

  // Budget calc (simple)
  const rateMin = document.getElementById("rateMin");
  const rateMax = document.getElementById("rateMax");
  const downPay = document.getElementById("downPay");
  const term = document.getElementById("term");
  const out = document.getElementById("budgetOut");
  const apply = document.getElementById("budgetApply");

  function num(v){ return parseInt(String(v||"").replace(/[^\d]/g,""),10) || 0; }

  function calcBudget(){
    if(!out) return;
    const dp = num(downPay?.value);
    const months = num(term?.value) || 48;
    const r1 = num(rateMin?.value);
    const r2 = num(rateMax?.value);

    if(budgetMode === "month"){
      const useRate = r2 || r1;
      const total = (useRate * months) + dp;
      out.textContent = total ? formatEUR(total) : "0 €";
    }else{
      // total mode: nutze rateMax als Gesamt (quick hack), oder user tippt später
      const total = (r2 || r1) + dp;
      out.textContent = total ? formatEUR(total) : "0 €";
    }
  }

  [rateMin, rateMax, downPay, term].forEach(el=>{
    if(el) el.addEventListener("input", calcBudget);
    if(el) el.addEventListener("change", calcBudget);
  });

  if(apply){
    apply.addEventListener("click", ()=>{
      // Budget -> PreisMax Filter setzen
      const budgetText = (out?.textContent||"").replace(/[^\d]/g,"");
      const budget = parseInt(budgetText,10) || 0;
      location.hash = "#/fahrzeuge";
      setTimeout(()=>{
        document.getElementById("priceMax").value = budget ? String(budget) : "";
        state.page = 1;
        render();
        window.scrollTo({ top: document.getElementById("viewCars").offsetTop - 80, behavior:"smooth" });
      }, 50);
    });
  }

  calcBudget();
}

initAutoHeroBlocks();
    setRoute(location.hash || "#/fahrzeuge");
    render();
    function applyCompanyData(){
  const addr = `${CONFIG.company}, ${CONFIG.street}, ${CONFIG.zipCity}`;

  const a = byId("addressDisplay");
  if(a) a.textContent = addr;

  const p = byId("phoneDisplay");
  if(p) p.textContent = CONFIG.phoneDisplay;

  // Map Consent Loader
  const btn = byId("btnLoadMap");
  if(btn){
    btn.addEventListener("click", ()=>{
      const frame = byId("mapFrame");
      const consent = byId("mapConsent");
      if(frame && consent){
        const q = encodeURIComponent(CONFIG.mapsQuery);
        frame.innerHTML = `<iframe
          title="Google Maps"
          width="100%"
          height="220"
          style="border:0;"
          loading="lazy"
          allowfullscreen
          referrerpolicy="no-referrer-when-downgrade"
          src="https://www.google.com/maps?q=${q}&output=embed"></iframe>`;
        consent.classList.add("hide");
        frame.classList.remove("hide");
      }
    });
  }
}

applyCompanyData();
  </script>
</body>
</html>
